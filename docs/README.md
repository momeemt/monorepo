# Nim メタプログラミング

## 前書き
今まで書いたプログラミングで、**プログラムを生成するプログラム**を書いたことがありますか？  
コンパイラやインタプリタの実装には欠かせないものでしょう。このような技術は**メタプログラミング**と呼ばれています。  
Nim言語には、メタプログラミングが容易に始められる土壌が整っています。  
例えば、C++のプリプロセッサの一つである、`#define`を使ったことがある人はいるかもしれません。これは、**項書き換えマクロ**と呼ばれるもので、一種のメタプログラミングです。複雑な`#define`の使用はプログラム全体を汚染するから使うべきではない、と思われている方も多いかもしれません。  
しかし、Nimの項書き換えマクロを提供する**template**は、衛生的で、他のプログラムやスコープを汚染しません。  
また、項を書き換えるだけに留まらず、Nimの抽象構文木、**AST**(Abstract Syntax Tree)を直接操作して、新しい文構造を定義することができます。これは、**macro**が提供する機能です。  
極端なメタプログラミングの使用は、プログラムから可読性や保守性を奪います。しかし、正しく利用すれば**冗長な表現の簡略化**など、柔軟に、抽象的にプログラムを扱えるようになります。規約を設定するフレームワークを開発する際にはよく活きることでしょう。  
この本では、項書き換えマクロの**template**、抽象構文木を扱う**macro**、コンパイラに補足的な情報を与える**pragma**の3つについて解説します。  
今こそ、隠れた名言語 **Nim** の真髄に触れましょう。